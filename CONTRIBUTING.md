# ЕТИС 2.0

## Правила вёрстки

### Переменные

1. **Только** через переменные прописываем:
    * цвета
    * скругления углов
    * ширину бокового меню
    * ширину контента страницы
    * максимальную ширину страницы
2. Переменные добавляются в селектор **:root** в самом начале css-файла.
3. Переменные группируются **по смыслу**.  
Например:
    * цвета с макета
    * размеры элементов
    * ...
4. Семантика имён переменных должна быть **аналогичной** семантике переменных с **макета**.  
Например: если на макете цвет называется "Highlighted text", то в коде должна быть переменная --highlighted-text.
5. Переменные добавляются в селекторы с помощью **var(--variable-name)**.

### Селекторы

1. **Порядок селекторов:** **от менее** специфичных **к более** специфичным.  
Порядок селекторов в коде:  
    * универсальный (*)
    * по элементам (html, body, div, p, ...)
    * более специфичные по элементам (html body p, table > tbody, ...)
    * с классами (.class-name)
    * с айдишниками (#id-name)

    > **Исключение**: если стайлим элемент, до которого можно добраться только с помощью псевдоклассов и вложенности элементов, но который является частью какого-то большого элемента (таблицы, блока, кнопки, ...), то его располагаем в коде согласно группировке селекторов.
2. **Группировка селекторов:** селекторы, которые стайлят части **одного** элемента (блока, таблицы, кнопки, ...) должны находиться **рядом** друг с другом.
3. Селекторы по классам пишем в формате **элемент.класс**.  
Например: если хотим стайлить таблицу с классом common, пишем селектор table.common.
4. Осторожно поступаем с **малозначимыми** и **абстрактными** именами классов (span12, row, common, ...).  
Они могут быть у **несвязанных** между собой элементов на **разных** страницах.
5. **Очень** осторожно поступаем с селекторами **только** по элементам (body, div, p, ...) и по псевдоклассам (:nth-child(), ...).  
**Обязательно сразу проверяем**, не стайлят ли такие селекторы элементы на других страницах. Таких селекторов лучше избегать. Если не получается, обсуждаем решение этой проблемы с командой.
6. Как можно **чаще** проверяем, не стайлим ли мы что-то лишнее.  
Как минимум на страницах:
    * Мой учебный план (кратко)
    * Мое расписание
    * Мои оценки (оценки за сессии, оценки в триместре, итоговый рейтинг за триместр, оценки в диплом)
    * Пропущенные занятия

### Стили

1. В каждом стиле используем **!important**.
2. Отделяем **табами** !important от самих стилей, чтобы код легче было читать.
3. Вместо px по максимуму используем **rem**.  
У нас:  
    * 0.5rem = 5px
    * **1rem = 10px**
    * 1.5rem = 15px
    * 2rem = 20px
    * …

    1rem = значение font-size в селекторе html. Коммитить изменение font-size в html без ведома команды **нельзя**.

### Комментарии

1. Перед **каждым** селектором оставляем комментарий: какие именно **элементы** страницы вы **хотели** стайлить этим селектором.
   > Например:
   >
   > ```css
   > /* Input Fields */
   > ```

2. Перед **большими** блоками, по которым группируются селекторы, оставляем **заметные** комментарии (капс + 4 звёздочки вместо 1).  
   > Например:
   >
   > ```css
   > /* Login Page */
   > /* ----------------------------------------------- */
   > ```

## Разработка

### Установка окружения

1. Установить [node.js](https://nodejs.org/en/), на `node --version` должен отвечать установленной версией.
2. Склонировать репозиторий `git clone https://github.com/ENAleksey/etis-extension.git`
3. Перейти в директорию проекта `cd etis-extension`
4. Установить необходимые модули `npm install`
5. Запустить команду `gulp`, она соберёт расширение в папке `/dist` и при изменении будет обновлять файлы в директории.
6. Добавить *временное дополнение* в браузер:
   * Chrome:  
      Открыть `chrome://extensions/` через адресную строку > Включить флажок "Режим разработчика" > Нажать на "Загрузить распакованное расширение" > Выбрать папку `/dist`
   * Firefox:  
      Открыть `about:debugging#/runtime/this-firefox` через адресную строку > Нажать на "Загрузить временное дополнение..." > Выбрать `/dist/manifest.json`
7. После каждого изменения необходимо обновлять расширение.  
   * Chrome это сделано в виде иконки перезагрузки на расширении.  
   * Firefox надо нажать кнопку "Обновить".

### Сборка расширения

1. После установки окружения можно выполнить команду `gulp build`, она соберёт все необходимые файлы в `/dist`
2. Запакуйте содержимое папки `dist` в архив `.zip`, после этого расширение готово к публикации.
